<form
  class="w-3/4 m-auto p-4"
  [formGroup]="registerForm"
  (ngSubmit)="register(registerForm)"
>
  <div class="flex flex-col mb-4 pt-3 relative">
    <p-floatLabel>
      <input id="name" type="text" pInputText formControlName="name" />
      <label for="name">Name</label>
    </p-floatLabel>

    @if(registerForm.get('name')?.invalid && registerForm.get('name')?.touched){
    @if(registerForm.get('name')?.getError('required')){

    <p-message severity="error" text="Name is required"></p-message>

    } @else if (registerForm.get('name')?.getError('minlength')) {

    <p-message
      severity="error"
      text="Name must be at least 3 characters"
    ></p-message>
    } }
  </div>

  <div class="flex flex-col mb-4 pt-3 relative">
    <p-floatLabel>
      <input id="email" type="email" pInputText formControlName="email" />
      <label for="email">Email</label>
    </p-floatLabel>

    @if(registerForm.get('email')?.invalid &&
    registerForm.get('email')?.touched){
    @if(registerForm.get('email')?.getError('required')){

    <p-message severity="error" text="Email is required"></p-message>

    } @else if (registerForm.get('email')?.getError('email')) {
    <p-message severity="error" text="Email is invalid"></p-message>

    } }
  </div>
  <div class="flex flex-col mb-4 pt-3 relative">
    <p-floatLabel>
      <p-password
        type="password"
        id="password"
        [toggleMask]="true"
        placeholder=""
        formControlName="password"
      />
      <label for="password">Password</label>
    </p-floatLabel>

    @if(registerForm.get('password')?.invalid &&
    registerForm.get('password')?.touched){
    @if(registerForm.get('password')?.getError('required')){
    <p-message severity="error" text="Password is required"></p-message>
    } @else if (registerForm.get('password')?.getError('pattern')) {
    <p-message
      severity="error"
      text="Password must contain at least 8 characters, 1 uppercase, 1 lowercase, 1 number and 1 special character"
    ></p-message>
    } }
  </div>
  <div class="flex flex-col mb-4 pt-3 relative">
    <p-floatLabel>
      <p-password
        type="password"
        id="confirm_password"
        [toggleMask]="true"
        formControlName="confirm_password"
      />
      <label for="confirm_password">Confirm Password</label>
    </p-floatLabel>

    @if(registerForm.get('confirm_password')?.invalid &&
    registerForm.get('confirm_password')?.touched){
    @if(registerForm.get('confirm_password')?.getError('required')){

    <p-message severity="error" text="confirm_password is required"></p-message>

    } @else if (registerForm.get('confirm_password')?.getError('pattern')) {

    <p-message
      severity="error"
      text="Password must contain at least 8 characters, 1 uppercase, 1 lowercase, 1 number and 1 special character"
    ></p-message>

    } } @if(registerForm.get('confirm_password')?.getError('notMatch')){

    <p-message severity="error" text="Passwords do not match"></p-message>

    }
  </div>

  <button type="submit" pButton pRipple class="p-button-info gap-1">
    @if(loading){
    <p-progressSpinner
      styleClass="w-5 h-5"
      strokeWidth="8"
      ariaLabel="loading"
      fill="transparent"
      animationDuration="1s"
    ></p-progressSpinner>

    } Register
  </button>
</form>

<p-toast></p-toast>
